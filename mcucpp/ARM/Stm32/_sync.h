#pragma once#include <stdint.h>bool __sync_bool_compare_and_swap_1(uint8_t *ptr, uint8_t oldval, uint8_t newval, ...){	if(__LDREXB(ptr) == oldval)		return __STREXB(newval, ptr) == 0;	else return false;}bool __sync_bool_compare_and_swap_2(uint16_t *ptr, uint16_t oldval, uint16_t newval, ...){	if(__LDREXH(ptr) == oldval)		return __STREXH(newval, ptr) == 0;	else return false;}inline bool __sync_bool_compare_and_swap_4(uint32_t *ptr, uint32_t oldval, uint32_t newval, ...){	uint32_t result;	__asm__ __volatile__	(	"ldrex %[result], [%[ptr]] \n" 	"CMP %[result], %[oldval] \n"	"ITEE EQ \n"	"strexeq %[result], %[newval], [%[ptr]] \n"	"clrexne \n"	"movne %[result], #1 \n"	: [oldval] "=r" (oldval), [result] "=r" (result), [newval] "=r" (newval)	: [ptr] "r" (ptr)	);	return result == 0;}